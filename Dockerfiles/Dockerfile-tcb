FROM erlang:20.2.2-slim

RUN apt-get update && apt-get install -y software-properties-common

ENV LOG_DIR "/var/minidote/logs"
ENV OP_LOG_DIR "/var/minidote/op_log"
ENV MINIDOTE_POOL_SIZE 100
ENV MINIDOTE_PORT 8087
ENV MINIDOTE_MAX_CONNECTIONS 1024
ENV CAMUS_PORT 6866

# PB Port for Minidote
EXPOSE 8087
# Port for CAMUS
EXPOSE 6866

ARG profile=default

ENV NAME=/minidote

COPY _build/${profile}/rel/$NAME $NAME

WORKDIR $NAME

CMD ["bin/env"]
